<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ú©ÙˆÛŒÛŒØ²</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .quiz-container {
            background: #1e272e;
            color: #fff;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            width: 100%;
            max-width: 900px;
            min-height: 600px;
            overflow: hidden;
        }

        .start-screen {
            padding: 30px 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
        }

        .start-title {
            font-size: 36px;
            margin-bottom: 20px;
            color: #3498db;
        }

        .start-description {
            font-size: 18px;
            margin-bottom: 30px;
            color: #ecf0f1;
            line-height: 1.8;
            max-width: 600px;
        }

        .start-btn, .restart-btn {
            background: linear-gradient(135deg, #2980b9 0%, #2c3e50 100%);
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 24px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
        }

        .start-btn:hover, .restart-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(41, 128, 185, 0.4);
        }

        .header {
            background: linear-gradient(135deg, #0c2461 0%, #1e3799 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
            display: none;
        }

        .timer {
            background: #e74c3c;
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            font-weight: bold;
            display: inline-block;
            font-size: 18px;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .question-section {
            padding: 40px;
        }

        .question-number {
            font-size: 18px;
            margin-bottom: 10px;
            font-weight: bold;
            color: #3498db;
        }

        .question-text {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 25px;
            color: #ecf0f1;
            line-height: 1.6;
        }

        .options-container {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            background: #2c3e50;
            border: 2px solid #34495e;
            padding: 15px 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 18px;
            color: #ecf0f1;
        }

        .option:hover {
            background: #34495e;
            border-color: #3498db;
            transform: translateY(-2px);
        }

        .option.selected {
            background: #3498db;
            color: white;
            border-color: #3498db;
            transform: translateY(-2px);
        }

        .option.correct {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }

        .option.wrong {
            background: #e74c3c;
            color: white;
            border-color: #e74c3c;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }

        .btn-primary {
            background: #2980b9;
            color: white;
        }

        .btn-primary:hover {
            background: #3498db;
            transform: translateY(-3px);
        }

        .btn-secondary {
            background: #7f8c8d;
            color: white;
        }

        .btn-secondary:hover {
            background: #95a5a6;
            transform: translateY(-3px);
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #2ecc71;
            transform: translateY(-3px);
        }

        .result-section {
            padding: 40px;
            text-align: center;
            display: none;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, #2980b9 0%, #2c3e50 100%);
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            color: white;
            box-shadow: 0 10px 25px rgba(41, 128, 185, 0.3);
        }

        .result-details {
            background: #2c3e50;
            padding: 25px;
            border-radius: 20px;
            margin: 20px 0;
            text-align: right;
        }

        .detail-item {
            margin: 10px 0;
            font-size: 18px;
            color: #ecf0f1;
        }

        .time-up-message {
            background: #e74c3c;
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 18px;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 20px;
            color: #3498db;
        }

        @media (max-width: 768px) {
            .quiz-container {
                margin: 10px;
                min-height: 500px;
            }
            
            .question-section {
                padding: 20px;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 16px;
            }
            
            .start-title {
                font-size: 32px;
            }
            
            .start-description {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="start-screen" id="start-screen">
            <h1 class="start-title">ğŸ¯ Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ú©ÙˆÛŒÛŒØ²</h1>
            <p class="start-description">
                Ø¨Ù‡ Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ú©ÙˆÛŒÛŒØ² Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯! 
                <br>
                Ø´Ù…Ø§ Û±Û° Ø³ÙˆØ§Ù„ Ø¯Ø§Ø±ÛŒØ¯ Ùˆ Û² Ø¯Ù‚ÛŒÙ‚Ù‡ Ø²Ù…Ø§Ù† Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ.
                <br>
                Ø§Ù…ØªÛŒØ§Ø² Ù†Ù‡Ø§ÛŒÛŒ Ø´Ù…Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ ØµØ­ÛŒØ­ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
            </p>
            <button class="start-btn" onclick="startQuiz()">Ø´Ø±ÙˆØ¹ Ù…Ø³Ø§Ø¨Ù‚Ù‡ ğŸš€</button>
        </div>

        <div class="header" id="quiz-header">
            <div class="timer" id="timer">02:00</div>
        </div>

        <div class="question-section" id="question-section" style="display: none;">
            <div class="loading" id="loading">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÙˆØ§Ù„Ø§Øª...</div>
            <div id="question-content" style="display: none;">
                <div class="question-number" id="question-number">Ø³ÙˆØ§Ù„ Ø´Ù…Ø§Ø±Ù‡ 1</div>
                <div class="question-text" id="question-text">Ø³ÙˆØ§Ù„ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯...</div>
                
                <div class="options-container" id="options-container"></div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" id="prev-btn" onclick="previousQuestion()">â¬… Ø³ÙˆØ§Ù„ Ù‚Ø¨Ù„ÛŒ</button>
                    <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()">Ø³ÙˆØ§Ù„ Ø¨Ø¹Ø¯ÛŒ â¡</button>
                </div>
            </div>
        </div>

        <div class="result-section" id="result-section">
            <div class="score-circle" id="final-score">0</div>
            <h2>Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø´Ù…Ø§</h2>
            
            <div class="result-details">
                <div class="detail-item">âœ… Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ ØµØ­ÛŒØ­: <span id="result-correct">0</span></div>
                <div class="detail-item">âŒ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ ØºÙ„Ø·: <span id="result-wrong">0</span></div>
                <div class="detail-item">ğŸ“ˆ Ø§Ù…ØªÛŒØ§Ø² Ø®Ø§Ù„Øµ: <span id="net-score">0</span></div>
                <div class="detail-item">â± Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒÙ…Ø§Ù†Ø¯Ù‡: <span id="time-left">0</span> Ø«Ø§Ù†ÛŒÙ‡</div>
                <div class="detail-item">â“ Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù‡ Ù†Ø´Ø¯Ù‡: <span id="unanswered">0</span></div>
            </div>

            <button class="btn btn-success restart-btn" onclick="restartQuiz()">ğŸ¯ Ú†Ø§Ù„Ø´ Ù…Ø¬Ø¯Ø¯</button>
        </div>
    </div>

    <script>
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let correctCount = 0;
        let wrongCount = 0;
        let timer;
        let timeLeft = 120;
        let selectedQuestions = [];
        let allQuestions = [];
        let quizStarted = false;

        function startQuiz() {
            quizStarted = true;
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('quiz-header').style.display = 'block';
            document.getElementById('question-section').style.display = 'block';
            correctCount = 0;
            wrongCount = 0;
            currentQuestionIndex = 0;
            userAnswers = new Array(10).fill(null);
            timeLeft = 120;
            updateTimerDisplay();
            loadQuestions();
            startTimer();
        }

        async function loadQuestions() {
            try {
                const response = await fetch('questions.json');
                const data = await response.json();
                allQuestions = data.questions;
                selectRandomQuestions();
                document.getElementById('loading').style.display = 'none';
                document.getElementById('question-content').style.display = 'block';
                displayCurrentQuestion();
            } catch (error) {
                document.getElementById('loading').innerHTML = 'Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÙˆØ§Ù„Ø§Øª! Ù„Ø·ÙØ§ ØµÙØ­Ù‡ Ø±Ø§ Ø±ÙØ±Ø´ Ú©Ù†ÛŒØ¯.';
            }
        }

        function startTimer() {
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) endQuizDueToTime();
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
        }

        function endQuizDueToTime() {
            clearInterval(timer);
            showResults();
            const resultSection = document.getElementById('result-section');
            const timeUpMessage = document.createElement('div');
            timeUpMessage.className = 'time-up-message';
            timeUpMessage.innerHTML = 'â° Ø²Ù…Ø§Ù† Ø´Ù…Ø§ Ø¨Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ø³ÛŒØ¯!';
            resultSection.insertBefore(timeUpMessage, resultSection.firstChild);
        }

        function selectRandomQuestions() {
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            selectedQuestions = shuffled.slice(0, 10);
        }

        function displayCurrentQuestion() {
            if (selectedQuestions.length === 0) return;
            const question = selectedQuestions[currentQuestionIndex];
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('question-number').textContent = `Ø³ÙˆØ§Ù„ Ø´Ù…Ø§Ø±Ù‡ ${currentQuestionIndex + 1}`;
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                if (userAnswers[currentQuestionIndex] === index) optionElement.classList.add('selected');
                optionElement.textContent = option;
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });
            updateNavigationButtons();
        }

        function selectOption(optionIndex) {
            const question = selectedQuestions[currentQuestionIndex];
            if (userAnswers[currentQuestionIndex] !== null) {
                if (userAnswers[currentQuestionIndex] === question.correct) correctCount--;
                else wrongCount--;
            }
            userAnswers[currentQuestionIndex] = optionIndex;
            if (optionIndex === question.correct) correctCount++;
            else wrongCount++;
            displayCurrentQuestion();
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            prevBtn.style.display = currentQuestionIndex === 0 ? 'none' : 'block';
            nextBtn.textContent = currentQuestionIndex === selectedQuestions.length - 1 ? 'Ù¾Ø§ÛŒØ§Ù† Ù…Ø³Ø§Ø¨Ù‚Ù‡ ğŸ' : 'Ø³ÙˆØ§Ù„ Ø¨Ø¹Ø¯ÛŒ â¡';
            prevBtn.style.order = 0;
            nextBtn.style.order = 1;
        }

        function nextQuestion() {
            if (currentQuestionIndex < selectedQuestions.length - 1) currentQuestionIndex++;
            else showResults();
            displayCurrentQuestion();
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) currentQuestionIndex--;
            displayCurrentQuestion();
        }

        function showResults() {
            clearInterval(timer);
            let unanswered = userAnswers.filter(a => a === null).length;
            let netScore = Math.max(0, correctCount - Math.floor(wrongCount/2));
            let finalScore = (netScore / selectedQuestions.length) * 100;
            document.getElementById('final-score').textContent = Math.round(finalScore);
            document.getElementById('result-correct').textContent = correctCount;
            document.getElementById('result-wrong').textContent = wrongCount;
            document.getElementById('net-score').textContent = netScore;
            document.getElementById('time-left').textContent = timeLeft;
            document.getElementById('unanswered').textContent = unanswered;
            document.getElementById('question-section').style.display = 'none';
            document.getElementById('quiz-header').style.display = 'none';
            document.getElementById('result-section').style.display = 'block';
        }

        function restartQuiz() {
            document.getElementById('result-section').style.display = 'none';
            startQuiz();
        }
    </script>
</body>
</html>
